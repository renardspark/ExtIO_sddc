<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDDC_Driver: ExtIO_sddc.dll (software digital down converter) - Oscar Steila, ik1xpv</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SDDC_Driver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">ExtIO_sddc.dll (software digital down converter) - Oscar Steila, ik1xpv</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3"></a></p>
<p><img src="https://github.com/ik1xpv/ExtIO_sddc/workflows/CMake/badge.svg" alt="CMake" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Installation Instructions</h1>
<p>You can download the latest EXTIO driver from the releases: <a href="https://github.com/ik1xpv/ExtIO_sddc/releases">https://github.com/ik1xpv/ExtIO_sddc/releases</a>. The direct link to the current version v1.2.0 Version released at 18/3/2021 is: <a href="https://github.com/ik1xpv/ExtIO_sddc/releases/download/v1.2.0/SDDC_EXTIO.ZIP">https://github.com/ik1xpv/ExtIO_sddc/releases/download/v1.2.0/SDDC_EXTIO.ZIP</a>.</p>
<p><em>If you want to try the beta EXTIO driver which is for testing, you can find the binary for each change here: <a href="https://github.com/ik1xpv/ExtIO_sddc/actions">https://github.com/ik1xpv/ExtIO_sddc/actions</a>. Select one specific code change you like to try, click on the link of the change. And you will find the binary on the bottom of the change.</em></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Build Instructions for ExtIO</h1>
<ol type="1">
<li>Install Visual Studio 2019 with Visual C++ support. You can use the free community version, which can be downloaded from: <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a></li>
</ol>
<ol type="1">
<li>Install CMake 3.19+, <a href="https://cmake.org/download/">https://cmake.org/download/</a></li>
</ol>
<ol type="1">
<li>Running the following commands in the root folder of the cloned repro:</li>
</ol>
<div class="fragment"><div class="line">&gt; mkdir build</div>
<div class="line">&gt; cd build</div>
<div class="line">&gt; cmake ..</div>
<div class="line">&gt; cmake --build .</div>
<div class="line">or</div>
<div class="line">&gt; cmake --build . --config Release</div>
<div class="line">&gt; cmake --build . --config RelWithDebInfo</div>
</div><!-- fragment --><ul>
<li>You need to download <b>32bit version</b> of fftw library from fftw website <a href="http://www.fftw.org/install/windows.html">http://www.fftw.org/install/windows.html</a>. Copy libfftw3f-3.dll from the downloaded zip package to the same folder of extio DLL.</li>
<li>If you are running <b>64bit</b> OS, you need to run the following different commands instead of "cmake .." based on your Visual Studio Version: <div class="fragment"><div class="line">VS2022: &gt;cmake .. -G &quot;Visual Studio 17 2022&quot; -A Win32</div>
<div class="line">VS2019: &gt;cmake .. -G &quot;Visual Studio 16 2019&quot; -A Win32</div>
<div class="line">VS2017: &gt;cmake .. -G &quot;Visual Studio 15 2017 Win32&quot;</div>
<div class="line">VS2015: &gt;cmake .. -G &quot;Visual Studio 14 2015 Win32&quot;</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Build Instructions for firmware</h1>
<ul>
<li>download latest Cypress EZ-USB FX3 SDK from here: <a href="https://www.cypress.com/documentation/software-and-drivers/ez-usb-fx3-software-development-kit">https://www.cypress.com/documentation/software-and-drivers/ez-usb-fx3-software-development-kit</a></li>
<li>follow the installation instructions in the PDF document 'Getting Started with FX3 SDK'; on Windows the default installation path will be 'C:\Program Files (x86)\Cypress\EZ-USB FX3 SDK\1.3' (see pages 17-18) - on Linux the installation path could be something like '/opt/Cypress/cyfx3sdk'</li>
<li>add the following environment variables: <div class="fragment"><div class="line">export FX3FWROOT=&lt;installation path&gt;</div>
<div class="line">export ARMGCC_INSTALL_PATH=&lt;ARM GCC installation path&gt;</div>
<div class="line">export ARMGCC_VERSION=4.8.1</div>
</div><!-- fragment --> (on Linux you may want to add those variables to your '.bash_profile' or '.profile')</li>
<li>all the previous steps need to be done only once (or when you want to upgrade the version of the Cypress EZ-USB FX3 SDK)</li>
<li>to compile the firmware run: <div class="fragment"><div class="line">cd SDDC_FX3</div>
<div class="line">make</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Build Instruction for Linux</h1>
<ol type="1">
<li>Install development packages: <div class="fragment"><div class="line">&gt; sudo apt install libfftw3-dev</div>
</div><!-- fragment --></li>
</ol>
<ol type="1">
<li>Follow Windows Build Instruction to run cmake to build Linux libaray</li>
</ol>
<h1><a class="anchor" id="autotoc_md8"></a>
Directory structure:</h1>
<p>\Core\ &gt; Core logic of the component r2iq.cpp &gt; The logic to demodulize IQ from ADC real samples FX3handler.cpp &gt; Interface with firmware RadioHandler.cpp &gt; The abstraction of different radios Radio*.cpp &gt; Hardware specific logic \ExtIO_sddc\ &gt; ExtIO_sddc sources, extio_sddc.cpp &gt; The implementation of EXTIO contract tdialog.cpp &gt; The Configuration GUI Dialog \libsddc\ &gt; libsddc lib \SDDC_FX3\ &gt; Firmware sources</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Change Logs</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
tag v1.4 version date 7/5/2024</h2>
<ul>
<li>Add SoapySDR module for Linux &amp; Windoes</li>
<li>Embedded firmware into Core to avoid carrying firmware file.</li>
</ul>
<p>Install SoapySDR on Linux via the follow command: </p><blockquote class="doxtable">
<p>&zwj;export SOAPY_SDR_PLUGIN_PATH=&lt;path of libSDDCSupport.so&gt; </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md11"></a>
tag v1.3.0RC1 Version "V1.2 RC1" date 4/11/2021</h2>
<ul>
<li>Use Ringbuffer for input and output #157</li>
<li>Delegate the VHF and HF decision to radio class #194</li>
<li>Debug trace via USB #195</li>
<li>Arm neon port #203</li>
<li><p class="startli">A dialogBox with SDR name and FX3 serial number allows selection of a device from many. #210</p>
<p class="startli">So far the known issues:</p>
</li>
<li>Al power up sometime FX3 is not enumerated as Cypress USB FX3 BootLoader Device. When it happens also Cypress USB Control Center app is not able to detect it and a hardware disconnect and reconnect maybe required to enumerate the unit.</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
tag v1.2.0 Version "V1.2.0" date 18/3/2021</h2>
<ul>
<li>Fix the crosstalk HF &lt;-&gt; VHF/UHF issue #177</li>
<li>When HDSDR's version &gt;= HDSDR v2.81 beta3 (March 8, 2021) following an ADC's sampling rate change the new IF bandwidths are computed dynamically and restart of HDSDR in not required.</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
tag v1.2RC1 Version "V1.2 RC1" date 18/2/2021</h2>
<ul>
<li>The ADC's nominal sampling frequency is user selectable from 50 MHz to 140 MHz at 1Hz step,</li>
<li>The reference calibration can be adjusted in the dialog GUI in a range of +/- 200 ppm. (#171)</li>
<li>The tuner IF center frequency is moved to 4.570 MHz that is the standard for RT820T. We were using 5 MHz before when we did not have yet fine tune ability. (#159)</li>
<li>Support for AVX/2/512 instructions added. This change may reduce CPU usage for some modern hardware.(#152)</li>
<li>The Kaiser-Bessel IF filter with 85% of Nyquist band are computed at initialization. It simplifies managment of IF filters (#147)</li>
<li><p class="startli">Add automatically build verification for both master branch and PRs. This feature of the Github environment speeds development checks(#141)</p>
<p class="startli">So far the known issues:</p>
</li>
<li>The ADC sampling frequency can be selected via the ExtIO dialog. HDSDR versions &lt;= 2.80 require to close HDSDR.exe and restart the application to have the right IF sample rates. Higher HDSDR releases will have dynamically allocated IF sample rates and they will not require the restart.</li>
<li>This release does not operate correctly with HF103 and similar designs that do not use a pll to generate the ADC sampling clock.</li>
<li>The accuracy is that of the SI5351a programming about 1 Hz</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
tag v1.1.0 Version "V1.1.0" date 29/12/2020</h2>
<ul>
<li>Fix the round of rf/if gains in the UI #109</li>
<li>Fix sounds like clipping, on strong stations #120</li>
<li><p class="startli">Fix reboot of FX3 #119</p>
<p class="startli">So far the known issues:</p>
</li>
<li>The reference frequency correction via HDSDR -&gt; Options -&gt; Calibration Settings -&gt;LO Frequency Calibration doesn't work correctly. This problem will be addressed in the next release.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
tag v1.1RC1 Version "V1.1 RC1" date 20/12/2020</h2>
<ul>
<li>Supports 128M ADC sampling rate selectable via the dialog GUI ( Justin Peng and Howard Su )</li>
<li>Use of libsddc allows development of Linux support and Soapy integration ( Franco Venturi <a href="https://github.com/fventuri/libsdd">https://github.com/fventuri/libsdd</a>)</li>
<li>Tune the LO with a 1Hz step everywhere (Hayati Ayguen <a href="https://github.com/hayguen/pffft">https://github.com/hayguen/pffft</a>).</li>
<li>Move multi thread r2iq to a multithreaded pipeline model to better leverage multi cores. Remove callback in USB (adcsample) thread to HDSDR to make sure we can reach 128Msps.</li>
<li>Continuous tuning LW,MW,HF and VHF.</li>
<li>Dialog GUI has samplerates and gains settings for use with other SDR applications than HDSDR.</li>
<li>Test harmonic R820T tuning is there (Hayati Ayguen <a href="https://github.com/librtlsdr/librtlsdr/tree/development">https://github.com/librtlsdr/librtlsdr/tree/development</a>)</li>
<li><p class="startli">the gain correction is made via HDSDR -&gt; Options -&gt; Calibration Settings -&gt;S-Meter Calibration.</p>
<p class="startli">So far the known issues:</p>
</li>
<li>The reference frequency correction via HDSDR -&gt; Options -&gt; Calibration Settings -&gt;LO Frequency Calibration doesn't work correctly. This problem will be addressed in the next release.</li>
<li>The 128M adc rate is experimental and must be activated manually in the ExtIO dialog GUI. It works with RX888 hardware that have 60 MHz LPF and requires a quite fast PC.</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
tag v1.01 Version "V1.01 RC1" date 06/11/2020</h2>
<ul>
<li>SDDC_FX3 directory contains ARM sources and GPIFII project to compile sddc_fx3.img</li>
<li>Detects the HW type: BBRF103, BBRF103, RX888 at runtime.</li>
<li>Si5351a and R820T2 driver moved to FX3 code</li>
<li>Redesign of FX3 control commands</li>
<li>Rename of FX3handler (ex: OpenFX3) and RadioHandler (ex: BBRF103) modules</li>
<li>Simplified ExtIO GUI Antenna BiasT, Dither, and Rand.</li>
<li>Reference frequency correction via software +/- 200 ppm range</li>
<li>Gain adjust +/-20 dB step 1dB</li>
<li>R820T2 controls RF gains via a single control from GUI</li>
<li>ExtIO.dll designed for HDSDR use.</li>
<li>HF103 added a tuning limit at ADC_FREQ/2.</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
tag v0.98 Version "SDDC-0.98" date 13/06/2019</h2>
<p>R820T2 is enabled to support VHF</p>
<h2><a class="anchor" id="autotoc_md18"></a>
tag v0.96 Version "SDDC-0.96" date 25/02/2018</h2>
<h2><a class="anchor" id="autotoc_md19"></a>
tag v0.95 Version "SDDC-0.95" date 31/08/2017</h2>
<p>Initial version</p>
<h1><a class="anchor" id="autotoc_md20"></a>
References</h1>
<ul>
<li>EXTIO Specification from <a href="http://www.sdradio.eu/weaksignals/bin/Winrad_Extio.pdf">http://www.sdradio.eu/weaksignals/bin/Winrad_Extio.pdf</a></li>
<li>Discussion and Support <a href="https://groups.io/g/NextGenSDRs">https://groups.io/g/NextGenSDRs</a></li>
<li>Recommended Application <a href="http://www.weaksignals.com/">http://www.weaksignals.com/</a></li>
<li><a href="http://www.hdsdr.de">http://www.hdsdr.de</a></li>
<li><a href="http://booyasdr.sourceforge.net/">http://booyasdr.sourceforge.net/</a></li>
<li><a href="http://www.cypress.com/">http://www.cypress.com/</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
Many thanks to</h1>
<ul>
<li>Alberto di Bene, I2PHD</li>
<li>Mario Taeubel</li>
<li>LightCoder (aka LC)</li>
<li>Howard Su</li>
<li>Hayati Ayguen</li>
<li>Franco Venturi</li>
<li>All the Others !</li>
</ul>
<h3><a class="anchor" id="autotoc_md22"></a>
2016,2017,2018,2019,2020,2021 IK1XPV Oscar Steila - ik1xpv(at)gmail.com</h3>
<p><a href="https://sdr-prototypes.blogspot.com/">https://sdr-prototypes.blogspot.com/</a></p>
<p><a href="http://www.steila.com/blog">http://www.steila.com/blog</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
